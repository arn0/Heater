<!doctype html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Radiator â€“ Nieuwe grafiek</title>
  <link rel="icon" href="favicon.ico">
  <style>
    :root {
      --bg: #141a21;
      --panel: #1a232e;
      --border: #2a3542;
      --text: #e7ecf2;
      --muted: #9fb0c1;
      --accent: #3aa0ff;
      --room: #ff6b6b;
      --target: #caa5ff;
      --outside: #2ec4ff;
      --stage1: rgba(239, 83, 80, 0.12);
      --stage2: rgba(239, 83, 80, 0.22);
      --stageBoth: rgba(239, 83, 80, 0.32);
      --grid: rgba(255,255,255,0.08);
    }
    @media (prefers-color-scheme: light) {
      :root:not([data-theme="dark"]) {
        --bg: #eef2f6;
        --panel: #f6f8fb;
        --border: #d7dde5;
        --text: #111;
        --muted: #586175;
        --accent: #8C3636;
        --room: #d22;
        --target: #a455e5;
        --outside: #0074d9;
        --stage1: rgba(239, 83, 80, 0.14);
        --stage2: rgba(239, 83, 80, 0.26);
        --stageBoth: rgba(239, 83, 80, 0.36);
        --grid: rgba(0,0,0,0.08);
      }
    }
    html, body { margin: 0; padding: 0; background: var(--bg); color: var(--text); font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    header { display:flex; align-items:center; gap:12px; padding: 10px 12px; border-bottom: 1px solid var(--border); background: var(--panel); }
    header a { color: var(--accent); text-decoration: none; font-weight: 600; }
    header a:hover { text-decoration: underline; }
    h1 { font-size: 18px; margin: 0; color: var(--text); }
    .toolbar { display:flex; flex-wrap:wrap; gap:12px; align-items:center; padding: 10px 12px; font-size: 14px; color: var(--muted); background: var(--panel); border-bottom:1px solid var(--border); }
    .toolbar label { display:flex; align-items:center; gap:6px; }
    .toolbar input[type="checkbox"] { accent-color: var(--accent); }
    .toolbar select { font-size: 14px; background: var(--panel); color: var(--text); border:1px solid var(--border); border-radius:8px; padding:4px 6px; }
    .wrap { padding: 0 8px 12px; }
    #canvasWrap { position: relative; height: 60vh; max-height: 520px; border: 1px solid var(--border); border-radius:12px; background: var(--panel); box-shadow: 0 8px 28px rgba(0,0,0,.25); }
    canvas { width: 100%; height: 100%; display: block; }
    .legend { display:flex; gap:16px; align-items:center; padding: 8px 12px; font-size: 13px; color: var(--muted); }
    .swatch { width:12px; height:12px; border-radius:2px; display:inline-block; margin-right:6px; }
    .hint { padding: 6px 12px; font-size: 12px; color: var(--muted); }
  </style>
  <script>
    (function(){
      try {
        const saved = localStorage.getItem('theme');
        if (saved === 'dark') document.documentElement.setAttribute('data-theme','dark');
        else if (saved === 'light') document.documentElement.setAttribute('data-theme','light');
        else document.documentElement.removeAttribute('data-theme');
      } catch (_) {}
    })();
  </script>
</head>
<body>
  <header>
    <a href="index.html">Home</a>
    <span style="opacity:.35">/</span>
    <a href="graph.html">Klassieke grafiek</a>
    <h1 style="margin-left:auto">Nieuwe grafiek</h1>
  </header>

  <div class="toolbar">
    <label><input type="checkbox" id="showRoom" checked> Ruimte</label>
    <label><input type="checkbox" id="showTarget" checked> Doel</label>
    <label><input type="checkbox" id="showOutside" checked> Buiten</label>
    <label><input type="checkbox" id="showStages" checked> Elementen I/II</label>

    <label style="margin-left:auto">Tijd:
      <select id="timeWindow">
        <option value="1">1 uur</option>
        <option value="6" selected>6 uur</option>
        <option value="24">24 uur</option>
        <option value="72">3 dagen</option>
        <option value="168">7 dagen</option>
      </select>
    </label>
  </div>

  <div class="wrap">
    <div id="canvasWrap">
      <canvas id="chartCanvas"></canvas>
    </div>
    <div class="legend">
      <span><span class="swatch" style="background: var(--room)"></span>Ruimte</span>
      <span><span class="swatch" style="background: var(--target)"></span>Doel</span>
      <span><span class="swatch" style="background: var(--outside)"></span>Buiten</span>
    </div>
    <div class="hint">Zoomen: scroll/knijp. Pannen: slepen. Dubbelklik om te resetten.</div>
  </div>

  <script src="chart-n.js" type="module"></script>
</body>
</html>
